<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Care Kits Project</title>
    <link rel="stylesheet" href="https://unpkg.com/@sakun/system.css" />
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="new.css">
</head>
<body class="">
    <p style="text-align: center; margin-top: 20px;">
        <a href="/" class="btn" style="text-decoration: underline;">Back to Home</a>
    </p>
    <div class="wrapper">
        <div class="header">
            <div class="window">
                <div class="title-bar">
                    <h1 class="title">Care Kits Project</h1>
                </div>
                <div class="separator"></div>
                <div class="window-pane" style="overflow: hidden;">
                    <div class="padding">

                        <!-- intro text -->

                        <p>
                            Care Kits are small bundles of essential supplies I personally assemble and distribute to individuals experiencing homelessness.
                        </p>
                        <p>
                            Each kit costs approximately <strong>$10</strong> to assemble (<em>$20 if a $10 gift card for food is included</em>).
                        </p>
                        <p>
                            These bags create small moments of dignity, connection, and care—offered freely, humbly, and without expectation.
                        </p>

                        <!-- images -->

                        <div style="display: flex; flex-wrap: wrap; gap: 1em; justify-content: center; align-items: center; margin-top: 2em;">

                          <div style="flex: 1 1 300px; text-align: center;">
                            <img src="/carekit_contents.jpg" alt="Care Kit Contents Spread Out" style="max-width: 100%; border-radius: 8px; box-shadow: 0px 4px 8px rgba(0,0,0,0.2);">
                            <p style="margin-top: 0.5em;">Care Kit items prepared for assembly</p>
                          </div>
                        
                          <div style="flex: 1 1 300px; text-align: center;">
                            <img src="/packaged_carekit.jpg" alt="Completed Care Kit Packaged" style="max-width: 100%; border-radius: 8px; box-shadow: 0px 4px 8px rgba(0,0,0,0.2);">
                            <p style="margin-top: 0.5em;">Completed Care Kit ready for gifting</p>
                          </div>
                        
                        </div>

                        <!-- more details and shopping list -->

                        <h2>Shopping List</h2>
                        <p>If you'd like to create your own, here's a list of the items I use:</p>

                        <!-- google sheets data -->
                        <div id="data-table"></div>

                        <h2>Care Kit Gifting Rules</h2>
                        <ol>
                            <li>You must package the bag yourself. (The sacred act of assembling builds emotional connection to the offering.)</li>
                            <li>You must kindly give it to someone. (No judgment, no pity—only sacred offering.)</li>
                            <li>You must maintain 3 seconds of eye contact when giving, or gently place the bag near them if they are asleep.</li>
                        </ol>

                        <h2>Care Kit Cost Breakdown</h2>
                        <p>Below is the full cost breakdown and math for assembling each kit:</p>

                        <br><br>
                        <a href="/" class="btn">Back to Home</a>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
      const sheetID = '1x6h1-zQZ1AAHRuHviIVYORp8A63GLGGQ4mHiD2_r-TE';
      const sheetName = 'data source'; // your tab name
      const query = encodeURIComponent('SELECT *');
      const url = `https://docs.google.com/spreadsheets/d/${sheetID}/gviz/tq?sheet=${sheetName}&tq=${query}`;
    
      fetch(url)
        .then(res => res.text())
        .then(rep => {
          const jsonData = JSON.parse(rep.substr(47).slice(0, -2));
          const table = document.createElement('table');
    
          table.innerHTML = `
            <thead>
              <tr>
                <th>Item Name</th>
                <th>Description</th>
                <th>Total Bulk Cost</th>
                <th>Count in Pack</th>
                <th>Cost per Item</th>
                <th>Brand</th>
                <th>Store Purchased From</th>
              </tr>
            </thead>
            <tbody>
              ${jsonData.table.rows.map(row => {
                if (!row.c || !row.c[0] || !row.c[0].v) return ''; // Skip empty rows
    
                // Prepare fields
                const itemName = row.c[0]?.v || '';
                const description = row.c[1]?.v || '';
                const url = row.c[2]?.v || '';
                const totalBulkCost = row.c[3]?.v || '';
                const countInPack = row.c[4]?.v || '';
                let costPerItem = row.c[5]?.v || '';
                const brand = row.c[6]?.v || '';
                const store = row.c[7]?.v || '';
    
                // Round cost per item to 2 decimals if it's a number
                if (typeof costPerItem === 'number') {
                  costPerItem = costPerItem.toFixed(2);
                }
    
                return `
                  <tr>
                    <td>${url ? `<a href="${url}" target="_blank">${itemName}</a>` : itemName}</td>
                    <td>${description}</td>
                    <td>$${totalBulkCost}</td>
                    <td>${countInPack}</td>
                    <td>$${costPerItem}</td>
                    <td>${brand}</td>
                    <td>${store}</td>
                  </tr>
                `;
              }).join('')}
            </tbody>
          `;
    
          document.getElementById('data-table').appendChild(table);
        })
        .catch(err => console.log(err));
    </script>
</body>
</html>
